## Демонстрация работы микросервисов с oauth2 и keycloak

### Описание принципа работы

#### 1. Реализованы 2 сервиса

1. [micro-service-1](micro-service-1) - порт 8083
2. [micro-service-server](micro-service-server) - порт 8084
 
#### 2. Оба сервиса защищены и требуют обязательной аутентификации

#### 3. Общения сервисов основано на процедуре - token relay pattern (шаблон ретрансляции токена)

#### 4. Реализация последовательность взаимодействия сервисов
1. [micro-service-1](micro-service-1) - сервис-1 создает запросы на сервис-2 для получение данных 
2. [micro-service-server](micro-service-server) - сервис-2 обрабатывает запросы и возвращает данные в сервис-1
3. начальная аутентификиция осуществляется POST запросом на сервер keycloak для получения id токена
4. полученый токен используется в http заголовке для формирования http запроса к сервису-1
5. сервис-1 получая запрос, извлекает id токен из security контекста и использует его для формирования http запроса в сервис-2 на получение данных
6. сервис-2 получая запрос от сервиса-1, формирует response ответ и возвращает его в сервис-1
7. каждый http запрос к сервисам, должен сопровождаться id токеном в заголовке запроса (headers)
8. последовательность действий при формировании запросов начинать с пунтка 3, так как refresh токен не предусмотрен  
9. oauth2 - перехватывает все http запросы, проверяет наличие id токена и верифицирует его в keycloak

